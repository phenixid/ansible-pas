---

- include_role:
    name: phenixid.util.systemd
  vars:
    service_name: pas

- include_role:
    name: phenixid.pas.pas

- name: "Start service"
  systemd:
    state: started
    daemon_reload: yes
    name: pas
  become: yes

- name: "Waiting for config API to become available..."
  wait_for:
    host: "{{ pas_config_api_host }}"
    port: "{{ pas_config_api_port }}"
  delegate_to: 127.0.0.1

- include_role:
    name: phenixid.pas.pas_fedsign
